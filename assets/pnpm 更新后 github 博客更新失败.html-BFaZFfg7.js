import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a as i,b as a,d as t,o as p}from"./app-f5WXaUKp.js";const l={};function r(d,s){return p(),e("div",null,[s[0]||(s[0]=i("h1",{id:"前言",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#前言"},[i("span",null,"前言")])],-1)),s[1]||(s[1]=i("p",null,"前几天使用 git 更新博客失败，github action 总是停留在 Setup pnpm 阶段。但是本地测试时候博客正常显示。",-1)),a(" more "),s[2]||(s[2]=t(`<h1 id="开始" tabindex="-1"><a class="header-anchor" href="#开始"><span>开始</span></a></h1><p>github action 报错信息如下：</p><div class="language-github line-numbers-mode" data-highlighter="shiki" data-ext="github" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-github"><span class="line"><span>  Error: Multiple versions of pnpm specified:</span></span>
<span class="line"><span>    - version 10 in the GitHub Action config with the key &quot;version&quot;</span></span>
<span class="line"><span>    - version pnpm@10.16.1+sha512.0e155aa2629db8672b49e8475da6226aa4bdea85fdcdfdc15350874946d4f3c91faaf64cbdc4a5d1ab8002f473d5c3fcedcd197989cf0390f9badd3c04678706 in the package.json with the key &quot;packageManager&quot;</span></span>
<span class="line"><span>  Remove one of these versions to avoid version mismatch errors like ERR_PNPM_BAD_PM_VERSION</span></span>
<span class="line"><span>      at readTarget (/home/runner/work/_actions/pnpm/action-setup/v4/dist/index.js:1:4742)</span></span>
<span class="line"><span>      at runSelfInstaller (/home/runner/work/_actions/pnpm/action-setup/v4/dist/index.js:1:3930)</span></span>
<span class="line"><span>      at async install (/home/runner/work/_actions/pnpm/action-setup/v4/dist/index.js:1:3154)</span></span>
<span class="line"><span>      at async main (/home/runner/work/_actions/pnpm/action-setup/v4/dist/index.js:1:445)</span></span>
<span class="line"><span>  Error: Error: Multiple versions of pnpm specified:</span></span>
<span class="line"><span>    - version 10 in the GitHub Action config with the key &quot;version&quot;</span></span>
<span class="line"><span>    - version pnpm@10.16.1+sha512.0e155aa2629db8672b49e8475da6226aa4bdea85fdcdfdc15350874946d4f3c91faaf64cbdc4a5d1ab8002f473d5c3fcedcd197989cf0390f9badd3c04678706 in the package.json with the key &quot;packageManager&quot;</span></span>
<span class="line"><span>  Remove one of these versions to avoid version mismatch errors like ERR_PNPM_BAD_PM_VERSION</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>原因是“前几天”的前一天，我把 pnpm 给更新了下，本地博客项目的 package.json 也随之更新为 <code>packageManager: &quot;pnpm@10.16.1+sha512.&lt;哈希码&gt;&quot;</code> ，于是就和github 配置文件 <code>.github/workflows/deploy-docs.yml</code> 中的 pnpm 版本产生冲突。</p><p>知道问题所在，解决方法也就来了：注释掉 deploy-doc.yml 中指定 pnpm 版本的代码。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>  - name: Setup pnpm</span></span>
<span class="line"><span>	uses: pnpm/action-setup@v4</span></span>
<span class="line"><span>	# 不再指定 version，action 会自动从 package.json 的 packageManager 字段读取</span></span>
<span class="line"><span>	# with:</span></span>
<span class="line"><span>	#   version: 10</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="尾声" tabindex="-1"><a class="header-anchor" href="#尾声"><span>尾声</span></a></h1><p>今天下午睡过了头，以往是一点半醒来，今天醒来已经三点半了。打开手机一看，微信三十九条消息，老师发布了文献调研任务，时间很紧，今晚截止。</p><p>于是，我从素材文件夹 demo 中翻出一篇，水一水。</p><p>另外，这次博客更新失败，我后续的一串迷之操作把博客项目改得很糟糕。没办法，只能学习 git 如何回退版本了。</p><div class="language-zsh line-numbers-mode" data-highlighter="shiki" data-ext="zsh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-zsh"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 指向前一个版本</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reset</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --hard</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> HEAD^</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 强制提交记录</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> push</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> origin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> main</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --force</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11))])}const h=n(l,[["render",r]]),m=JSON.parse('{"path":"/bug/pnpm%20%E6%9B%B4%E6%96%B0%E5%90%8E%20github%20%E5%8D%9A%E5%AE%A2%E6%9B%B4%E6%96%B0%E5%A4%B1%E8%B4%A5.html","title":"pnpm 更新后 github 博客更新失败","lang":"zh-CN","frontmatter":{"title":"pnpm 更新后 github 博客更新失败","date":"2025-09-19T00:00:00.000Z","tags":["pnpm"],"category":["报错"],"isOriginal":"true","description":"前几天使用 git 更新博客失败，github action 总是停留在 Setup pnpm 阶段。但是本地测试时候博客正常显示。","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"pnpm 更新后 github 博客更新失败\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-09-19T00:00:00.000Z\\",\\"dateModified\\":\\"2025-09-19T11:32:55.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"庸碌无常\\",\\"url\\":\\"https://pluinyiasnhg.top\\"}]}"],["meta",{"property":"og:url","content":"https://pluinyiasnhg.top/bug/pnpm%20%E6%9B%B4%E6%96%B0%E5%90%8E%20github%20%E5%8D%9A%E5%AE%A2%E6%9B%B4%E6%96%B0%E5%A4%B1%E8%B4%A5.html"}],["meta",{"property":"og:site_name","content":"庸碌无常的博客"}],["meta",{"property":"og:title","content":"pnpm 更新后 github 博客更新失败"}],["meta",{"property":"og:description","content":"前几天使用 git 更新博客失败，github action 总是停留在 Setup pnpm 阶段。但是本地测试时候博客正常显示。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-19T11:32:55.000Z"}],["meta",{"property":"article:tag","content":"pnpm"}],["meta",{"property":"article:published_time","content":"2025-09-19T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-19T11:32:55.000Z"}]]},"git":{"createdTime":1758281575000,"updatedTime":1758281575000,"contributors":[{"name":"pluinyiasnhg","username":"pluinyiasnhg","email":"pluinyiasnhg@gmail.com","commits":1,"url":"https://github.com/pluinyiasnhg"}]},"readingTime":{"minutes":1.46,"words":438},"filePathRelative":"bug/pnpm 更新后 github 博客更新失败.md","excerpt":"\\n<p>前几天使用 git 更新博客失败，github action 总是停留在 Setup pnpm 阶段。但是本地测试时候博客正常显示。</p>\\n","autoDesc":true}');export{h as comp,m as data};
